<html>
  <head>
    <title>Octopus Demo</title>
  
    <style>
    canvas {
      background:         radial-gradient(circle, #004 0%,  #000 100%);
    }
    </style>
  </head>

  <body>
    <div style="border-style: solid; border-width: 2px; width: 320px;">
      <canvas width="320" height="450" id="drawing">canvas tag not supported</canvas>
    </div>
  </body>
</html>

<script type="text/javascript">
    var Octopus = function(ctx, w, h) {
      this.ellipse = function(cx, cy, rx, ry, rotate, stroke) {
        ctx.save(); // save state
        ctx.beginPath();

        ctx.translate(cx - rx, cy - ry);
        if (rotate) ctx.rotate(rotate * Math.PI / 180);
        ctx.scale(rx, ry);
        ctx.arc(1, 1, 1, 0, 2 * Math.PI, false);

        ctx.restore(); // restore to original state
        ctx.fill();
        if (stroke) ctx.stroke();
      }
      
      this.drawTentacles = function() {
        var i;
        var degrees = [-40, 40, 22, -23, 14, -13, 7, -8];

      
        for (i = 0; i < 8; i++) {
          var width = w / 10;
          var y = h / 7;
          var d = degrees[i];
          var p = w / 320 / (d * d);
          var phase = Math.random() * Math.PI * 2;

          ctx.save()
          ctx.globalAlpha = 0.75;

          for (j = 1; j < 16; j++) {
            ctx.fillStyle = '#04'+ Math.floor(4 + j / 3);
            ctx.rotate(d * Math.PI / 180 / j);
            x = w / 20 * Math.sin(phase + j / 8 * Math.PI);
            this.ellipse(x, y, width, width * 0.6 + p * 8);
            y += width / 2.5 + p * 200;
            width *= 0.85;
          
          }
          ctx.restore();
        }
      }
      
      this.drawHead = function() {
        ctx.globalAlpha = 1;

        // head
        var gradient = ctx.createRadialGradient(0, - h /4, 0, 0, 0 - h / 4, w / 2);
        gradient.addColorStop(0, '#0ac');
        gradient.addColorStop(0.35, '#06c');
        gradient.addColorStop(0.75, '#058');
        gradient.addColorStop(1, "rgba(0, 54, 64, 0.95)");

        ctx.fillStyle = gradient;

        this.ellipse(0, -h / 8, w / 4, w / 2.5 , 1.5);

        ctx.globalAlpha = 0.5;
        ctx.fillStyle = '#068';

        for (i = 0; i < 16; i++) {
          var x = w / 5.25  * Math.sin(i / 8 * Math.PI);
          var y = w / 3.25 * Math.cos(i / 8 * Math.PI);
          this.ellipse(x, y + -h / 8, w / 20, w / 12, i / 8 * Math.PI);
        }
        for (i = 0; i < 12; i++) {
          var x = w / 7.5  * Math.sin(i / 6 * Math.PI);
          var y = w / 6.5 * Math.cos(i / 6 * Math.PI);
          this.ellipse(x, y + -h / 8, w / 20, w / 12, i / 6 * Math.PI);
        }
        for (i = 0; i < 6; i++) {
          var x = w / 15  * Math.sin(i / 3 * Math.PI);
          var y = w / 12 * Math.cos(i / 3 * Math.PI);
          this.ellipse(x, y + -h / 8, w / 24, w / 16, i / 3 * Math.PI);
        }
      }
      
      this.drawEye = function(x, y, ry, scale, rotation, direction) {
        var rx = ry * scale;
        ctx.save();
        var gradient = ctx.createRadialGradient(0, y, 0, 0, 0, w / 3);
        gradient.addColorStop(0,  '#fff');
        gradient.addColorStop(0.6,'#fff');
        gradient.addColorStop(1,  '#468');

        ctx.fillStyle = gradient;
        ctx.globalAlpha = 0.55;

        this.ellipse(x, y, rx, ry, rotation, true);

        ctx.globalAlpha = 1 ;

        // eye lashes
        ctx.fillStyle = '#000';

        for (i=0 ; i < 3 ; i++) {
          var ax = Math.sin((5 + rotation + 10 * i) / 180 * Math.PI); 
          var ay = Math.cos((5 + rotation + 10 * i) / 180 * Math.PI); 
          
          ctx.beginPath();
          ctx.moveTo(x + direction * ax * rx, y - ay * ry * 0.975);
          ctx.quadraticCurveTo(x + direction * ax * 1.1 * ry,
                               y - ay * 1.1 * ry,
                               x + direction * ax * 1.2 * ry,
                               y - ay * 1.2 * ry);
          ctx.stroke();
        }
  
        ctx.restore();
      }

      this.drawEyes = function() {
        var eyeHeight = -h / 12;

        // right eye
        this.drawEye(w / 8, eyeHeight, w / 6, 0.666, 5, 1);

        // left eye
        this.drawEye(-w / 8, eyeHeight, w / 6, 0.56, -4, -1);

        // pupils
        ctx.fillStyle = '#000';
        this.ellipse(w / 9, eyeHeight, w / 24, w / 16);
        this.ellipse(-w / 10, eyeHeight * 1.05, w / 28, w / 18);
      }

      this.draw = function() {
        ctx.save()
        ctx.translate(w / 2, h / 2.5);
        ctx.lineWidth = w / 100;

        this.drawTentacles();
        this.drawHead();
        this.drawEyes();

        ctx.restore()
      }

  }

  var canvas = document.getElementById("drawing");
  var ctx = canvas.getContext("2d");
  var w = canvas.width;
  var h = canvas.height

  var o = new Octopus(ctx, w, h);
  o.draw();
  </script>

